<!DOCTYPE html>
<html>
<head>
    <script src="https://appwrite.io/v1"></script>
</head>
<body>
    <script>
        async function testDatabase() {
            alert('ğŸš€ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
            
            try {
                // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„
                const client = new Appwrite.Client();
                client
                    .setEndpoint('https://fra.cloud.appwrite.io/v1')
                    .setProject('696ea7200039a13fde62');
                
                // 2. Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø¯Ù…Ø§Øª
                const account = new Appwrite.Account(client);
                const databases = new Appwrite.Databases(client);
                
                // 3. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                await account.createAnonymousSession();
                alert('âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­');
                
                // 4. Ù‚Ø±Ø§Ø¡Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const users = await databases.listDocuments('1891231976', 'users');
                alert(`ğŸ“Š Ù‚Ø±Ø§Ø¡Ø© Ù†Ø§Ø¬Ø­Ø©: ${users.total} Ù…Ø³ØªØ®Ø¯Ù…`);
                
                // 5. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ
                const testUser = await databases.createDocument(
                    '1891231976',
                    'users',
                    'unique()',
                    {
                        telegram_id: 'test_' + Date.now(),
                        username: 'test_user',
                        first_name: 'Ø§Ø®ØªØ¨Ø§Ø±',
                        balance: 0,
                        status: 'active',
                        created_at: new Date().toISOString()
                    }
                );
                alert(`ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§Ø¬Ø­: ${testUser.$id}`);
                
                // 6. Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ
                await databases.deleteDocument('1891231976', 'users', testUser.$id);
                alert('ğŸ—‘ï¸ Ø­Ø°Ù Ù†Ø§Ø¬Ø­');
                
                alert('ğŸ‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª!');
                
            } catch (error) {
                alert(`âŒ ÙØ´Ù„: ${error.message}`);
                console.error('Error:', error);
            }
        }
        
        // Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
        testDatabase();
    </script>
</body>
</html>
